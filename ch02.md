2장에서는 TSC, 타입 체커 등이 어떻게 동작하는지와 타입스크립트 프로그래밍을 위한 환경 설정에 대해 배운다.

<br/>  

# 2.1 컴파일러

프로그램을 실행한다는 것은 컴파일러가 소스 코드를 파싱해 AST를 만들고, AST를 다시 바이트코드로 변환한 것을 런타임이 평가하도록 지시하는 것.

대다수의 언어는 아래 과정으로 프로그램을 실행.

1. 프로그램(코드)가 AST로 파싱됨.
2. AST가 바이트코드로 컴파일됨.
3. 런타임이 바이트코드를 평가함.

TS가 다른 언어와 다른 점은 컴파일러가 코드를 바이트코드 대신 JavaScript로 변환한다는 점.

이후로는 일반적인 자바스크립트 코드처럼 브라우저, NodeJS로 실행.

그렇다면 타입스크립트는 언제 코드를 안전하게 만들까?

타입스크립트 컴파일러는 AST를 만들어 결과 코드를 만들기 전에 타입 확인을 거침.

```jsx
타입 검사기(typechecker): 코드의 타입 안전성을 검증하는 특별한 프로그램.
```

### 타입스크립트 컴파일 과정

![Group 25 (1)](https://user-images.githubusercontent.com/48905932/216357914-c9b34769-503b-42ef-b918-2c6305b5ce4e.png)

- 과정 1 ~ 3은 TSC가 수행하며, 과정 4 ~ 6은 브라우저, NodeJS, 자바스크립트 엔진과 같은 자바스크립트 런타임이 실행.
- 과정 1~2에서는 소스 코드에 사용된 타입을 이용하지만 과정3에서는 이용하지 않음.
    
    → TSC가 타입스크립트 코드를 자바스크립트 코드로 컴파일 할 때는 개발자가 사용한 타입을 확인하지 않음.
    
    → 개발자가 코드에 기입한 타입 정보는 최종적으로 만들어지는 프로그램에 아무런 영향을 주지 않으며, 단지 타입을 확인하는 데만 쓰임.
    
---

<br/>  

# 2.2 타입 시스템

최신 언어는 저마다의 타입 시스템을 갖추고 있음.

```jsx
타입 시스템: 타입 검사기가 프로그램에 타입을 할당하는 데 사용하는 규칙 집합.
```

타입시스템은 보통 두 가지의 종류로 구분됨.

1. 어떤 타입을 사용하는지를 컴파일러에 명시적으로 알려주는 타입 시스템.
2. 자동으로 타입을 추론하는 타입 시스템.

타입스크립트는 두 가지 시스템 모두의 영향을 받음.

즉, 개발자는 타입을 명시하거나, 타입스크립트가 추론하도록 하는 방식 중에서 선택 가능.

1. 타입을 명시하는 방식
    
    어노테이션을 이용하면 타입스크립트에 타입을 명시적으로 타입 지정 가능.
    
    ```jsx
    const a: number = 1;
    const b: string = 'hello';
    const c: boolean[] = [true, false];  
    ```
    
2. 타입스크립가 타입을 추론하도록 하는 방식.
    
    ```jsx
    const a = 1;
    const b = 'hello';
    ```
    
<br/>    

## 2.2.1 타입스크립트 vs 자바스크립트

| 타입 시스템 기능 | 자바스크립트 | 타입스크립트 |
| --- | --- | --- |
| 타입 결정 방식 | 동적 | 정적 |
| 타입이 자동으로 변환되는가? | O | X(대부분) |
| 언제 타입을 확인하는가? | 런타임 | 컴파일 타임 |
| 언제 에러를 검출하는가? | 런타임(대부분) | 컴파일 타임(대부분) |   

<br/>  

### 타입은 어떻게 결정되는가?

동적 타입 바인딩: 자바스크립트가 프로그램을 실행해야만 특정 데이터의 타입을 알 수 있음을 의미.

자바스크립트는 프로그램 실행 전 타입을 알 수 없음.

타입스크립트: 점진적으로 타입을 확인하는 언어.

즉, 타입스크립트는 컴파일 타임에 프로그램의 모든 타입을 알고 있을 때 최상의 결과를 보여줄 수 있지만, 프로그램을 컴파일하는데 반드시 모든 타입을 알아야 하는 것은 아님.

점진적 타입 확인은 타입을 지정하지 않은 기존 자바스크립트 코드를 타입을 사용하는 타입스크립트로 마이그레이션할 때 특히 유용.

하지만 코드를 마이그레이션하는 상황이 아니라면 모든 코드의 타입을 컴파일 타임에 지정하는 것을 목표로 하자.    

<br/>  


### 자동으로 타입이 변환되는가?    

자바스크립트는 약한 타입언어.

즉, 자바스크립트는 유효하지 않은 연산을 수행하면, 다양한 규칙을 적용하며 개발자가 정말 의도한 바를 알아내려고 노력함.

반면 타입스크립트는 유효하지 않은 작업을 발견하는 즉시 불평함.

자바스크립트가 제공하는 암묵적 변환 때문에 문제의 원인을 추적하기 어렵고, 코드가 암묵적으로 의미하는 바를 이해해야 하므로 엔지니어 각자가 자신의 작업을 완수하기 어려움.    

<br/>  

### 언제 타입을 검사하는가?

타입스크립트에서는 컴파일 타임에 코드의 타입을 확인하기 때문에 코드를 실행하지 않고도 코드에 에러가 있음을 알 수 있다.

타입스크립트는 정적으로 코드를 분석해 에러를 검출하고 코드를 실행하기도 전에 알려준다.

<br/>  

### 에러는 언제 검출되는가?

자바스크립트는 런타임에 예외를 던지거나 암묵적 형변환을 수행.

즉, 프로그램을 실행해야만 문제 확인 가능.

타입스크립트는 컴파일 타임에 문법 에러와 타입 관련 에러를 모두 검출.    

<br/>  

---

<br/>  

# 2.3 코드 편집기 설정

TSC 자체도 타입스크립트로 구현된 명령행 도구이므로 TSC를 실행하려면 NodeJS가 필요.

NodeJS는 프로젝트의 의존성이나 빌드를 관리하는 패키지 관리자 NPM을 포함.

NPM을 이용해 TSC와 TSLint를 설치하자.

```jsx
npm init
npm install --save-dev typescript tslint @types/node
```

### 2.3.1 tsconfig.json

모든 타입스크립트 프로젝트는 루트 디렉터리에 tsconfig.json 이라는 파일이 존재해야 한다.

tsconfig.json 파일은 타입스크립트에서 어떤 파일을 컴파일하고, 어떤 자바스크립트 버전으로 방출하는지 등을 정의함.

| 옵션 | 설명 |
| --- | --- |
| include | TSC가 타입스크립트 파일을 찾을 디렉터리 |
| module | TSC가 코드를 컴파일할 대상 모듈 시스템 |
| outDIr | 생성된 자바스크립트 코드를 출력할 디렉터리 |
| target | TSC가 코드를 컴파일할 자바스크립트 버전 |

### 2.3.2 tslint.json

보통 프로젝트는 TSLint 설정을 정의하는 tslint.json 파일도 포함한다.
